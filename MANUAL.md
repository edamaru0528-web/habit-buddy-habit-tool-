# Habit Buddy ハビットトラッカー マニュアル

## 📋 目次

1. [ツール概要](#ツール概要)
2. [公開URL](#公開url)
3. [管理者ページの使い方](#管理者ページの使い方)
4. [生徒ページの使い方](#生徒ページの使い方)
5. [計算式の説明](#計算式の説明)
6. [レポート生成機能](#レポート生成機能)
7. [データ保存の仕組み](#データ保存の仕組み)
8. [公開方法](#公開方法)

---

## ツール概要

**Habit Buddy**は、習慣化を支援するWebアプリケーションです。

| 項目 | 説明 |
|---|---|
| 目的 | 習慣化プログラム（3ヶ月/6ヶ月/9ヶ月コース）の進捗管理 |
| 管理者機能 | ユーザー作成、レポート生成、データ分析 |
| 生徒機能 | 毎日の習慣チェック、進捗確認 |
| データベース | JSONBin.io（クラウド） |
| ホスティング | Vercel |

---

## 公開URL

| ページ | URL |
|---|---|
| 管理者ページ | `https://habit-buddy-habit-tool.vercel.app/admin.html` |
| 生徒ページ | `https://habit-buddy-habit-tool.vercel.app/index.html?user={ユーザーID}` |

---

## 管理者ページの使い方

### 1. ユーザー作成

1. 管理者ページにアクセス
2. 「ユーザー名」を入力
3. 「開始日」を選択
4. 「プラン」を選択（3ヶ月/6ヶ月/9ヶ月）
5. 「習慣」を追加（例：運動、勉強）
6. 「ユーザーを作成」ボタンをクリック

### 2. 生徒用URLの共有

ユーザー作成後、生成されるURLを生徒に共有：
```
https://habit-buddy-habit-tool.vercel.app/index.html?user={ユーザーID}
```

### 3. レポート生成

1. 「対象ユーザー」を選択
2. 「レポート月」を選択（1ヶ月目〜9ヶ月目）
3. 「レポートを生成」ボタンをクリック
4. AI分析が完了すると、レポートが表示される
5. 「テキストをコピー」または「HTMLをダウンロード」で出力

---

## 生徒ページの使い方

### 1. アクセス方法

管理者から共有されたURLにアクセス：
```
https://habit-buddy-habit-tool.vercel.app/index.html?user={ユーザーID}
```

### 2. ホーム画面に追加する方法（iPhone）

毎日アクセスしやすくするため、ホーム画面にアイコンを追加できます。

#### 手順

1. **管理者から送られたリンクをタップ**
   - LINEやメールで届いたリンクをタップ
   - Safariでページが開く

2. **共有ボタンをタップ**
   - 画面下部の「共有」アイコン（□に↑）をタップ

3. **「ホーム画面に追加」を選択**
   - 一覧から「ホーム画面に追加」をタップ
   - ⚠️ **「Webアプリとして開く」はオフにする**（推奨）

4. **「追加」をタップ**
   - アイコン名は自動入力される
   - 右上の「追加」をタップ

5. **ホーム画面から開く**
   - ホーム画面に追加されたアイコンをタップ

#### 初回起動時（ユーザーID入力）

ホーム画面から初めて開いた際、ユーザーID入力画面が表示される場合があります：

1. 管理者から送られた「ユーザーID」を確認
2. 入力欄にユーザーIDを入力
3. 「ログイン」をタップ
4. 以降は自動的にログイン

> 💡 **ヒント**: ユーザーIDは管理者から送られたメッセージに記載されています。
> 例：「🔑 ユーザーID：abc123」

### 3. 習慣の記録

1. 当日の習慣項目をチェック
2. チェックを入れると自動的に保存される
3. 過去のデータはカレンダーで確認可能

### 4. 一時停止機能

- 「一時停止」ボタンで習慣記録を一時停止
- 停止期間中はカレンダーに「停止中」と表示
- 「再開」ボタンで再開可能

---

## 計算式の説明

### 1. 習慣別達成率

```
達成率 = (達成した日数 ÷ 記録対象日数) × 100
```

**例**: 30日間で20日達成 → `20 ÷ 30 × 100 = 66.7%`

### 2. 曜日別達成率

```
曜日別達成率 = (その曜日で達成した日数 ÷ その曜日の総日数) × 100
```

**例**: 月曜日が4回あり、3回達成 → `3 ÷ 4 × 100 = 75%`

### 3. 平均達成率

```
平均達成率 = 全習慣の達成率の合計 ÷ 習慣数
```

**例**: 運動60%、勉強40% → `(60 + 40) ÷ 2 = 50%`

### 4. 2日連続失敗回数

連続して2日以上失敗した回数をカウント。

**例**: ○×××○×○××× の場合
- 1回目: ×××（2日連続失敗）
- 2回目: ×××（2日連続失敗）
- **合計: 2回**

### 5. 週別サマリー

```
週別達成件数 = その週で達成した習慣の総数
週別記録件数 = その週で記録した習慣の総数
```

---

## レポート生成機能

### 1. レポート構成

| セクション | 内容 |
|---|---|
| サマリーカード | 記録日数、平均達成率 |
| 曜日別達成率グラフ | 棒グラフで曜日ごとの達成率を表示 |
| 習慣別達成率グラフ | 各習慣の達成率を比較 |
| 曜日別成功率表 | 習慣×曜日のマトリックス表 |
| 2日連続失敗回数 | 各習慣の連続失敗回数 |
| AI分析 | 得意な点、苦手な点、アドバイス |

### 2. AI分析（Gemini API）

AI分析は以下の3セクションで構成：

| セクション | 内容 |
|---|---|
| 💪 得意な点 | データに基づく強みを3点（具体的な数値を含む） |
| ◇ 苦手な点 | 改善点を3点（具体的な数値を含む） |
| 💡 具体的アドバイス | 実践的なアドバイスを3点 |

### 3. 月別総論の構成

すべての月で統一された3段落構成：

1. **第1段落**（挨拶と称賛）
2. **第2段落**（実績の振り返り）
3. **第3段落**（今後への期待）

---

## データ保存の仕組み

### 1. アーキテクチャ

```
[生徒ページ] ←→ [JSONBin.io] ←→ [管理者ページ]
     ↓              ↓              ↓
  習慣記録        データ保存      レポート生成
```

### 2. JSONBin.io

| 項目 | 説明 |
|---|---|
| サービス | JSONBin.io（無料プラン） |
| 保存形式 | JSON |
| リクエスト上限 | 10,000リクエスト/月（無料プラン） |
| データ永続性 | クラウドに永続保存 |

### 3. データ構造

```json
{
  "users": [
    {
      "id": "2le2z0dc",
      "name": "三枝",
      "startDate": "2025-04-24",
      "plan": "9months",
      "habits": ["運動", "勉強"],
      "records": {
        "2025-04-24": {
          "運動": true,
          "勉強": false
        }
      }
    }
  ]
}
```

---

## 公開方法

### 1. 使用サービス

| サービス | 用途 | URL |
|---|---|---|
| GitHub | ソースコード管理 | `github.com/edamaru0528-web/habit-buddy-habit-tool-` |
| Vercel | Webホスティング | `habit-buddy-habit-tool.vercel.app` |
| JSONBin.io | データベース | `jsonbin.io` |

### 2. デプロイ方法

1. ローカルでコードを修正
2. GitHubにプッシュ
   ```bash
   git add .
   git commit -m "変更内容"
   git push origin main
   ```
3. Vercelが自動的にデプロイ（1〜2分）

### 3. 環境変数

| 変数名 | 説明 |
|---|---|
| JSONBin API Key | JSONBin.ioへのアクセス用 |
| Gemini API Key | AI分析用 |

---

## トラブルシューティング

### 1. グラフが表示されない

- ブラウザをリロード（Cmd+Shift+R）
- コンソールでエラーを確認

### 2. AI分析が失敗する

- Gemini APIキーを確認
- APIのレート制限を確認

### 3. データが保存されない

- JSONBin.ioのリクエスト上限を確認
- ネットワーク接続を確認

---

## お問い合わせ

**Habit Buddy代表 なみ**

---

*最終更新: 2026-01-22*
